<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="/JavaWeb_20220705/css/pure-min.css">
		<link rel="stylesheet" href="/JavaWeb_20220705/css/mystyle.css">
		<meta charset="UTF-8">
		<title>Person Rest</title>
		<script>
			// 查詢所有資料
			function queryPerson() {
				var url = '/JavaWeb_20220705/rest/person/';
				var method = {method: 'GET'};
				fetch(url, method)
				.then((response)=>{
					return response.text();
				})
				.then((json_str)=>{
					console.log(json_str);
					console.log(typeof(json_str));
					// 因為 json_str 目前是 string 型態
					// 所以要利用 JSON.parse(json_str) 轉為 Json 物件陣列以利分析
					var array = JSON.parse(json_str);
					console.log(array);
					console.log(typeof(array));
					console.log(array.length);
					
					document.getElementById('person_list').innerText = json_str;
				});
			}
			
			// 頁面載入完成後要做的事
			window.onload = (event) =>{
			    console.log('Page Loaded');
			    queryPerson();
			};
		</script>
	</head>
	<body style="padding: 10px">
		<h2>本範例是一個 Person Rest SPA 的應用</h2>
		<ul>
			<li>單筆查詢: GET http://localhost:8080/JavaWeb_20220705/rest/person/4</li>
			<li>多筆查詢: GET http://localhost:8080/JavaWeb_20220705/rest/person/</li>
			<li>新增: POST http://localhost:8080/JavaWeb_20220705/rest/person/</li>
			<li>修改: PUT http://localhost:8080/JavaWeb_20220705/rest/person/2</li>
			<li>刪除: DELETE http://localhost:8080/JavaWeb_20220705/rest/person/3</li>
		</ul>
		
		<table width="100%">
			<tr>
				<!-- Person 表單 -->
				<td valign="top" width="50%">
					<form class="pure-form" onsubmit="return false">
						<fieldset>
							<legend>Person 表單</legend>
							序號: <input type="text" id="id" name="id" readonly="readonly"><p />
							姓名: <input type="text" id="name" name="name" required="required"><p />
							年齡: <input type="number" id="age" name="age" required="required"><p />
							<button type="reset" class="pure-button">清除</button>
							<button type="submit" class="button-success pure-button">新增</button>
						</fieldset>
					</form>
				</td>
				<!-- Person 列表 -->
				<td valign="top" width="50%">
					<form class="pure-form">
						<fieldset>
							<legend>Person 列表</legend>
							<table class="pure-table pure-table-bordered">
								<thead>
									<tr>
										<th>序號</th><th>姓名</th><th>年齡</th>
									</tr>
								</thead>
								<tbody>
									<div id="person_list"></div>
								</tbody>
							</table>
							
							
						</fieldset>
					</form>	
				</td>
			</tr>
		</table>
			
	</body>
</html>